<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Zoom Map</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.29/"></script>
    <style>
      html, body, #viewDiv { height: 100%; margin: 0; padding: 0; }
    </style>
  </head>
  <body>
    <div id="viewDiv"></div>
    <script>
      require(["esri/Map", "esri/views/MapView"], function(Map, MapView) {
        const map = new Map({ basemap: "topo-vector" });
        const view = new MapView({
          container: "viewDiv",
          map: map,
          center: [31.8, 30.4],
          zoom: 8
        });

        // Listen for zoom instructions from Joget
        window.addEventListener("message", function(event) {
          if (event.data && event.data.type === "zoomToLocation") {
            const { lat, lon } = event.data;
            view.goTo({ center: [lon, lat], zoom: 14 });
          }
        });
      });
    </script>
  </body>
</html>
